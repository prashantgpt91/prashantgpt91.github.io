import{j as e,S as O,l as Y,q as _,r as q,n as Z,E as S}from"./ui-BJbaq_vO.js";import{u as J,f as K,r as d}from"./vendor-ByMTfMZ6.js";import{I as Q,F as C,D as W,P as X,a as ee}from"./FilterDropdown-ogbJmRyn.js";import{H as P,B as D}from"./Header-D2_8rNvs.js";import{P as u,B as p}from"./markdownUtils-DCLgD1VY.js";import{g as ae,a as te,b as se}from"./blogLoader-UXn-pDOb.js";import"./index-C2Yd6V4w.js";import"./utils-C4xBKWBT.js";import"./dropdown-menu-CuU9gAqI.js";import"./content-C1erlEkJ.js";const he=()=>{const[s,f]=J(),E=K(),[r,I]=d.useState(null),[N,T]=d.useState([]),[y,U]=d.useState([]),[z,A]=d.useState([]),[B,v]=d.useState(!0),w=parseInt(s.get("page")||"1"),j=parseInt(s.get("size")||u.MEDIUM.toString()),n=s.get("category")||"all",i=s.get("tag")||"all",o=s.get("search")||"",x=s.get("dateStart")||"",m=s.get("dateEnd")||"";d.useEffect(()=>{(async()=>{v(!0);try{const[t,l,g]=await Promise.all([ae(w,j,n,i,o),te(),se()]);I(t),T(["all",...l]),U(["all",...g]);const G=Array.from(new Set(t.items.map(b=>new Date(b.date).getFullYear().toString()))).sort((b,H)=>parseInt(H)-parseInt(b));A(["all",...G])}catch(t){console.error("Error loading blog data:",t)}finally{v(!1)}})()},[w,j,n,i,o,x,m]);const c=a=>{const t=new URLSearchParams(s);Object.entries(a).forEach(([l,g])=>{g===""||g==="all"||l==="page"&&g===1?t.delete(l):t.set(l,g.toString())}),f(t)},L=a=>{c({search:a,page:1})},R=a=>{c({category:a,page:1})},k=a=>{c({tag:a,page:1})},F=a=>{c({dateStart:a.start||"",dateEnd:a.end||"",page:1})},M=a=>{c({page:a})},V=a=>{c({size:a,page:1})},$=(a,t)=>{t.target.closest(".badge-clickable, .external-link")||E(`/blog/${a}`)},h=[n!=="all"?1:0,i!=="all"?1:0,x||m?1:0,o?1:0].reduce((a,t)=>a+t,0);return B?e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-950",children:[e.jsx(P,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-950",children:[e.jsx(P,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Blog Posts"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Insights, tutorials, and thoughts on machine learning, AI, software development, and technology."})]}),e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsxs("div",{className:"relative max-w-md mx-auto",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Q,{placeholder:"Search posts...",value:o,onChange:a=>L(a.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center flex-wrap",children:[e.jsx(C,{label:"Category",options:N,selectedValue:n,onValueChange:R,placeholder:"All Categories",showCount:N.length>10}),e.jsx(C,{label:"Tag",options:y,selectedValue:i,onValueChange:k,placeholder:"All Tags",showCount:y.length>10}),e.jsx(W,{value:{start:x,end:m},onDateRangeChange:F,years:z,className:"w-full sm:w-auto"}),h>0&&e.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>f(new URLSearchParams),className:"text-xs text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:["Clear all (",h,")"]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(X,{currentPageSize:j,pageSizeOptions:[u.SMALL,u.MEDIUM,u.LARGE],onPageSizeChange:V})})]}),r&&e.jsxs("div",{className:"text-center mb-6 text-sm text-gray-600 dark:text-gray-400",children:[o&&`Search results for "${o}" • `,n!=="all"&&`Category: ${n} • `,i!=="all"&&`Tag: ${i} • `,(x||m)&&"Date filtered • ",r.totalItems," posts found"]}),r&&r.items.length>0?e.jsx("div",{className:"grid gap-6 md:gap-8 mb-12",children:r.items.map(a=>e.jsx("article",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:t=>$(a.slug,t),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:"outline",className:"text-xs capitalize",children:a.category}),a.featured&&e.jsx(p,{variant:"default",className:"text-xs bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:"Featured"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"h-3 w-3"}),new Date(a.date).toLocaleDateString()]}),a.readTime&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"h-3 w-3"}),a.readTime]})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:a.title}),a.author&&e.jsxs("div",{className:"flex items-center gap-1 mb-3 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:a.author})]}),a.excerpt&&e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 text-sm line-clamp-3",children:a.excerpt}),a.tags&&a.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4 relative z-10",children:[a.tags.slice(0,5).map(t=>e.jsxs(p,{variant:"outline",className:"badge-clickable text-xs relative",onClick:l=>{l.stopPropagation(),k(t)},children:[e.jsx(Z,{className:"h-2 w-2 mr-1"}),t]},t)),a.tags.length>5&&e.jsxs(p,{variant:"outline",className:"text-xs",children:["+",a.tags.length-5]})]}),(a.demoUrl||a.githubUrl)&&e.jsxs("div",{className:"flex flex-wrap gap-3 mt-auto",children:[a.demoUrl&&e.jsxs("a",{href:a.demoUrl,target:"_blank",rel:"noopener noreferrer",className:"external-link flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",onClick:t=>t.stopPropagation(),children:[e.jsx(S,{className:"h-3 w-3"}),"Demo"]}),a.githubUrl&&e.jsxs("a",{href:a.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"external-link flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",onClick:t=>t.stopPropagation(),children:[e.jsx(S,{className:"h-3 w-3"}),"GitHub"]})]})]})},a.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:h>0?"No posts found matching your criteria.":"No blog posts available."}),h>0&&e.jsx(D,{variant:"outline",onClick:()=>f(new URLSearchParams),className:"mt-4",children:"Clear all filters"})]}),r&&r.totalPages>1&&e.jsx(ee,{pagination:r,onPageChange:M,className:"mt-8"})]})]})};export{he as default};
