import{j as e,q as D,r as k,s as L,S as A,t as M,n as R,U,v as $}from"./ui-CccbgBsB.js";import{f as F,h as O,r as N}from"./vendor-pRJWWONf.js";import{I as G}from"./input-B1zRQsKP.js";import{B as g,H as S}from"./Header-DeGH3vjD.js";import{B as H}from"./markdownUtils-dis8iGUx.js";import{g as q,P as y,a as Z,b as _,c as J}from"./blogLoader-BxP_mfSS.js";import"./index-FbwEQPfy.js";import"./utils-C4xBKWBT.js";import"./content-D9wG4tMO.js";function K({pagination:l,onPageChange:n,className:u="",showPageInfo:t=!0,maxVisiblePages:o=5}){const{currentPage:i,totalPages:d,totalItems:w,itemsPerPage:v,hasNextPage:P,hasPrevPage:b}=l,c=q(i,d,o),j=(i-1)*v+1,m=Math.min(i*v,w);return d<=1?null:e.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between gap-4 ${u}`,children:[t&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",j," to ",m," of ",w," results"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>n(i-1),disabled:!b,className:"flex items-center gap-1",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),c[0]>1&&e.jsxs(e.Fragment,{children:[e.jsx(g,{variant:i===1?"default":"outline",size:"sm",onClick:()=>n(1),className:"min-w-[40px]",children:"1"}),c[0]>2&&e.jsx("div",{className:"flex items-center justify-center min-w-[40px] h-9",children:e.jsx(k,{className:"h-4 w-4"})})]}),c.map(r=>e.jsx(g,{variant:i===r?"default":"outline",size:"sm",onClick:()=>n(r),className:"min-w-[40px]",children:r},r)),c[c.length-1]<d&&e.jsxs(e.Fragment,{children:[c[c.length-1]<d-1&&e.jsx("div",{className:"flex items-center justify-center min-w-[40px] h-9",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx(g,{variant:i===d?"default":"outline",size:"sm",onClick:()=>n(d),className:"min-w-[40px]",children:d})]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>n(i+1),disabled:!P,className:"flex items-center gap-1",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(L,{className:"h-4 w-4"})]})]})]})}function Q({currentPageSize:l,pageSizeOptions:n,onPageSizeChange:u,className:t=""}){return e.jsxs("div",{className:`flex items-center gap-2 text-sm ${t}`,children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Show:"}),e.jsx("select",{value:l,onChange:o=>u(Number(o.target.value)),className:"border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:n.map(o=>e.jsx("option",{value:o,children:o},o))}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"per page"})]})}const le=()=>{const[l,n]=F(),u=O(),[t,o]=N.useState(null),[i,d]=N.useState([]),[w,v]=N.useState([]),[P,b]=N.useState(!0),c=parseInt(l.get("page")||"1"),j=parseInt(l.get("size")||y.MEDIUM.toString()),m=l.get("category")||"all",r=l.get("search")||"",h=l.get("tag")||"";N.useEffect(()=>{(async()=>{b(!0);try{const[s,x,p]=await Promise.all([Z(c,j,m,r||h),_(),J()]);o(s),d(["all",...x]),v(p)}catch(s){console.error("Error loading blog data:",s)}finally{b(!1)}})()},[c,j,m,r,h]);const f=a=>{const s=new URLSearchParams(l);Object.entries(a).forEach(([x,p])=>{p===""||p==="all"||x==="page"&&p===1?s.delete(x):s.set(x,p.toString())}),n(s)},C=a=>{f({search:a,tag:"",page:1})},I=a=>{f({category:a,page:1})},z=a=>{f({tag:a,search:"",page:1})},E=a=>{f({page:a})},T=a=>{f({size:a,page:1})},B=(a,s)=>{s.target.closest(".tag-badge")||u(`/blog/${a}`)};return P?e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-950",children:[e.jsx(S,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-950",children:[e.jsx(S,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Blog"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Insights, tutorials, and thoughts on software development, AI, and technology."})]}),e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsxs("div",{className:"relative max-w-md mx-auto",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(G,{placeholder:"Search blog posts...",value:r,onChange:a=>C(a.target.value),className:"pl-10"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:i.map(a=>e.jsxs(g,{variant:m===a?"default":"outline",size:"sm",onClick:()=>I(a),className:"capitalize",children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),a]},a))}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Q,{currentPageSize:j,pageSizeOptions:[y.SMALL,y.MEDIUM,y.LARGE],onPageSizeChange:T})})]}),t&&e.jsxs("div",{className:"text-center mb-6 text-sm text-gray-600 dark:text-gray-400",children:[r&&`Search results for "${r}" • `,h&&`Tagged with "${h}" • `,m!=="all"&&`Category: ${m} • `,t.totalItems," posts found"]}),t&&t.items.length>0?e.jsx("div",{className:"grid gap-6 md:gap-8 mb-12",children:t.items.map(a=>e.jsx("article",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:s=>B(a.slug,s),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-4 w-4"}),new Date(a.date).toLocaleDateString()]}),a.author&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-4 w-4"}),a.author]}),a.readTime&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"h-4 w-4"}),a.readTime]})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:a.title}),a.excerpt&&e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 line-clamp-2",children:a.excerpt}),a.tags&&a.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map(s=>e.jsx(H,{variant:"secondary",className:"tag-badge text-xs cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900 transition-colors",onClick:x=>{x.preventDefault(),x.stopPropagation(),z(s)},children:s},s))})]})},a.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:r||h?"No posts found matching your criteria.":"No blog posts available."}),(r||h||m!=="all")&&e.jsx(g,{variant:"outline",onClick:()=>{n(new URLSearchParams)},className:"mt-4",children:"Clear filters"})]}),t&&t.totalPages>1&&e.jsx(K,{pagination:t,onPageChange:E,className:"mt-8"})]})]})};export{le as default};
